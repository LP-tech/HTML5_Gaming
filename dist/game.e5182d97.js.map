{"version":3,"sources":["game.js"],"names":["gameScene","Phaser","Scene","config","type","AUTO","width","height","scene","game","Game","init","playerSpeed","enemyMaxY","enemyMinY","preload","load","image","create","add","sprite","setOrigin","player","sys","setScale","treasure","enemies","group","key","repeat","setXY","x","y","stepX","stepY","Actions","ScaleXY","getChildren","Call","enemy","speed","Math","random","isPlayerAlive","cameras","main","resetFX","update","input","activePointer","isDown","Geom","Intersects","RectangleToRectangle","getBounds","gameOver","numEnemies","lenght","i","shake","time","delayedCall","restart"],"mappings":";AAAA,IAAIA,EAAY,IAAIC,OAAOC,MAAM,QAE7BC,EAAS,CACTC,KAAMH,OAAOI,KACbC,MAAO,KACPC,OAAQ,IACRC,MAAOR,GAGPS,EAAO,IAAIR,OAAOS,KAAKP,GAE3BH,EAAUW,KAAO,WACRC,KAAAA,YAAc,IACdC,KAAAA,UAAY,IACZC,KAAAA,UAAY,IAGrBd,EAAUe,QAAU,WACXC,KAAAA,KAAKC,MAAM,aAAc,6BACzBD,KAAAA,KAAKC,MAAM,SAAU,yBACrBD,KAAAA,KAAKC,MAAM,SAAU,iCACrBD,KAAAA,KAAKC,MAAM,WAAY,wBAKhCjB,EAAUkB,OAAS,WACR,KAAKC,IAAIC,OAAO,EAAG,EAAG,cAC5BC,UAAU,EAAE,GACVC,KAAAA,OAAS,KAAKH,IAAIC,OAAO,GAAI,KAAKG,IAAId,KAAKN,OAAOI,OAAS,EAAG,UAC9De,KAAAA,OAAOE,SAAS,IAGhBC,KAAAA,SAAW,KAAKN,IAAIC,OAAO,KAAKG,IAAId,KAAKN,OAAOG,MAAQ,GAAI,KAAKiB,IAAId,KAAKN,OAAOI,OAAS,EAAG,YAC7FkB,KAAAA,SAASD,SAAS,IAElBE,KAAAA,QAAU,KAAKP,IAAIQ,MAAM,CAC1BC,IAAK,SACLC,OAAQ,EACRC,MAAO,CACHC,EAAG,IACHC,EAAG,IACHC,MAAO,GACPC,MAAO,MAQRR,KAAAA,QAAQpB,MAAQ,GACrBL,OAAOkC,QAAQC,QAAQ,KAAKV,QAAQW,eAAgB,IAAK,IAEzDpC,OAAOkC,QAAQG,KAAK,KAAKZ,QAAQW,cAAe,SAASE,GACrDA,EAAMC,MAAwB,EAAhBC,KAAKC,SAAe,GACnC,MAEEC,KAAAA,eAAgB,EAChBC,KAAAA,QAAQC,KAAKC,WAItB9C,EAAU+C,OAAS,WACZ,GAAC,KAAKJ,cAAN,CAIA,KAAKK,MAAMC,cAAcC,SAEnB5B,KAAAA,OAAOS,GAAK,KAAKnB,aAEvBX,OAAOkD,KAAKC,WAAWC,qBAAqB,KAAK/B,OAAOgC,YAAa,KAAK7B,SAAS6B,cAE7EC,KAAAA,WAML,IAHA7B,IAAAA,EAAU,KAAKA,QAAQW,cACvBmB,EAAa9B,EAAQ+B,OAEjBC,EAAI,EAAGA,EAAIF,EAAYE,IASxBzD,GARHyB,EAAQgC,GAAG1B,GAAKN,EAAQgC,GAAGlB,MACxBd,EAAQgC,GAAG1B,GAAK,KAAKnB,WAAYa,EAAQgC,GAAGlB,MAAQ,EAEnDd,EAAQgC,GAAGlB,QAAU,EACdd,EAAQgC,GAAG1B,GAAK,KAAKlB,WAAaY,EAAQgC,GAAGlB,MAAQ,IAE5Dd,EAAQgC,GAAGlB,QAAU,GAEtBvC,OAAOkD,KAAKC,WAAWC,qBAAqB,KAAK/B,OAAOgC,YAAa5B,EAAQgC,GAAGJ,aACnF,CACSC,KAAAA,WACL,SAKZvD,EAAUuD,SAAW,WAEZZ,KAAAA,eAAgB,EAEhBC,KAAAA,QAAQC,KAAKc,MAAM,KAEnBC,KAAAA,KAAKC,YAAY,IAAK,WAClBrD,KAAAA,MAAMsD,WACZ,GAAI","file":"game.e5182d97.js","sourceRoot":"..","sourcesContent":["let gameScene = new Phaser.Scene('Game');\n\nlet config = {\n    type: Phaser.AUTO,\n    width: 1300,\n    height: 1000,\n    scene: gameScene\n};\n\nlet game = new Phaser.Game(config);\n\ngameScene.init = function() {\n    this.playerSpeed = 1.5;\n    this.enemyMaxY = 280;\n    this.enemyMinY = 80;\n}\n\ngameScene.preload = function() {\n    this.load.image('background', 'images/tut/background.png');\n    this.load.image('player', 'images/tut/player.png');\n    this.load.image('dragon', 'images/tut/pet_dragon_new.png');\n    this.load.image('treasure', 'images/tut/gold.png');\n   // this.load.spritesheet('dragon', 'images/tut/pet_dragon_new.png', { frameWidth: 32, frameHeight: 38 });\n    //this.treasure.width = 40;\n};\n\ngameScene.create = function() {\n  let bg = this.add.sprite(0, 0, 'background');\n  bg.setOrigin(0,0);\n  this.player = this.add.sprite(40, this.sys.game.config.height / 2, 'player');\n  this.player.setScale(0.5);\n\n  \n  this.treasure = this.add.sprite(this.sys.game.config.width - 80, this.sys.game.config.height / 2, 'treasure');\n  this.treasure.setScale(0.5);\n\n  this.enemies = this.add.group({ \n      key: 'dragon',\n      repeat: 3,\n      setXY: {\n          x: 110,\n          y: 100,\n          stepX: 80,\n          stepY: 20\n      },\n    //   setScale: { \n    //       x: 0.5,\n    //       y: 0.5\n    //   }\n\n  });\n    this.enemies.width = 40;\n    Phaser.Actions.ScaleXY(this.enemies.getChildren(), -1.5, 0.5 );\n    //Je definis la vitesse de l'enemie\n    Phaser.Actions.Call(this.enemies.getChildren(), function(enemy){\n        enemy.speed = Math.random() * 2 + 1;\n    }, this);\n\n    this.isPlayerAlive = true;\n    this.cameras.main.resetFX();\n\n};\n\ngameScene.update = function() {\n    if(!this.isPlayerAlive) {\n        return;\n    }\n\n    if(this.input.activePointer.isDown) {\n        //faire en sorte de player marche\n        this.player.x += this.playerSpeed;\n    }\n    if(Phaser.Geom.Intersects.RectangleToRectangle(this.player.getBounds(), this.treasure.getBounds()))\n    {\n        this.gameOver();\n    }\n\n    let enemies = this.enemies.getChildren();\n    let numEnemies = enemies.lenght;\n\n    for(let i = 0; i < numEnemies; i++) {\n        enemies[i].y += enemies[i].speed;\n        if(enemies[i].y >= this.enemyMaxY &&enemies[i].speed > 0)\n        {\n            enemies[i].speed *= -1;\n        } else if (enemies[i].y <= this.enemyMinY && enemies[i].speed < 0)\n        {\n            enemies[i].speed *= -1;\n        }\n        if(Phaser.Geom.Intersects.RectangleToRectangle(this.player.getBounds(), enemies[i].getBounds()))\n        {\n            this.gameOver();\n            break;\n        }\n    }\n};\n\ngameScene.gameOver = function() {\n\n    this.isPlayerAlive = false;\n    //ajout shake camera effect\n    this.cameras.main.shake(500);\n\n    this.time.delayedCall(500, function()Â {\n        this.scene.restart();\n    }, [], this);\n    \n\n}"]}