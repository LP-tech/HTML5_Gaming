{"version":3,"sources":["game.js"],"names":["gameScene","Phaser","Scene","config","type","AUTO","width","height","scene","game","Game","init","playerSpeed","enemyMaxY","enemyMinY","preload","load","image","create","bg","add","sprite","setOrigin","player","sys","setScale","treasure","enemies","group","key","repeat","setXY","x","y","stepX","stepY","Actions","ScaleXY","getChildren","Call","enemy","speed","Math","random","isPlayerAlive","cameras","main","resetFX","update","input","activePointer","isDown","Geom","Intersects","RectangleToRectangle","getBounds","gameOver","numEnemies","lenght","i","shake","time","delayedCall","restart","gameWin","camera","text"],"mappings":"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","file":"game.7bbe06d5.js","sourceRoot":"..","sourcesContent":["let gameScene = new Phaser.Scene('Game');\n\nlet config = {\n    type: Phaser.AUTO,\n    width: 1000,\n    height: 620,\n    scene: gameScene\n};\n\nlet game = new Phaser.Game(config);\n\ngameScene.init = function() {\n    this.playerSpeed = 2;\n    this.enemyMaxY = 280;\n    this.enemyMinY = 80;\n\n}\n\ngameScene.preload = function() {\n    this.load.image('background', 'images/tut/background.png');\n    this.load.image('player', 'images/tut/player.png');\n    this.load.image('dragon', 'images/tut/pet_dragon_new.png');\n    this.load.image('treasure', 'images/tut/gold.png');\n};\n\ngameScene.create = function() {\n  let bg = this.add.sprite(0, 0, 'background');\n  bg.setOrigin(0,0);\n  this.player = this.add.sprite(40, this.sys.game.config.height / 1.61, 'player');\n  this.player.setScale(0.20);\n\n  \n  this.treasure = this.add.sprite(this.sys.game.config.width - 20, this.sys.game.config.height / 2, 'treasure');\n  this.treasure.setScale(0.05);\n\n  this.enemies = this.add.group({ \n      key: 'dragon',\n      repeat: 4,\n      setXY: {\n          x: 110,\n          y: 300,\n          stepX: 180,\n          stepY: 35 \n      },\n  });\n\n  \n    this.enemies.width = 40;\n    Phaser.Actions.ScaleXY(this.enemies.getChildren(), -0.8, -0.8 );\n    \n    //Je definis la vitesse de l'enemie\n    Phaser.Actions.Call(this.enemies.getChildren(), function(enemy){\n        enemy.speed = Math.random() * 2 + 1;\n        \n        \n    }, this);\n   // this.physics.add.collider(enemies, player);\n\n    \n    \n\n    this.isPlayerAlive = true;\n    this.cameras.main.resetFX();\n\n};\n\n\ngameScene.update = function() {\n    if(!this.isPlayerAlive) {\n        return;\n    }\n\n    if(this.input.activePointer.isDown) {\n        //faire en sorte que player marche\n        this.player.x += this.playerSpeed;\n    }\n    if(Phaser.Geom.Intersects.RectangleToRectangle(this.player.getBounds(), this.treasure.getBounds()))\n    {\n        this.gameOver();\n\n    }\n\n    let enemies = this.enemies.getChildren();\n    let numEnemies = enemies.lenght;\n\n    for(let i = 0; i < numEnemies; i++) {\n        \n        enemies[i].y += enemies[i].speed;\n\n        if(enemies[i].y >= this.enemyMaxY && enemies[i].speed > 0)\n        {\n            enemies[i].speed *= -1;\n        } else if (enemies[i].y <= this.enemyMinY && enemies[i].speed < 0)\n        {\n            enemies[i].speed *= -1;\n        }\n        if(Phaser.Geom.Intersects.RectangleToRectangle(this.player.getBounds(), enemies[i].getBounds()))\n        {\n            this.gameOver();\n            break;\n        }\n    }\n};\n\ngameScene.gameOver = function() {\n\n    this.isPlayerAlive = false;\n    //ajout shake camera effect\n    this.cameras.main.shake(500);\n\n    this.time.delayedCall(500, function()Â {\n        this.scene.restart();\n    }, [], this);\n\n    // var x = (player.x < 400) ? Phaser.Math.Between(400, 800) : Phaser.Math.Between(0, 400);\n\n    // var enemies = enemy.create(x, 5, 'dragon');\n    // enemies.setBounce(1);\n    // enemies.setColliderWorldBounds(true);\n    // enemies.setVelocity(Phaser.Math.Between(-200, 200), 20);\n    \n\n};\n\ngameScene.gameWin = function() {\n    this.isPlayerAlive = false;\n    this.camera.main.shake(500);\n\n   // this.sprite.on('animationstart', listener);\n\n    this.add.text(50, 50, 'WINNER, \"Goudy Bookletter 1911\", Times, serif' );\n\n}"]}